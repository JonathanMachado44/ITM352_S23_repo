<!--Jonathan Machado update page -->
<!DOCTYPE html>
<script src="/user_data.js" type="json"></script>
<script src="/products.js" type="text/javascript"></script>
<!--This script runs when the window loads-->
<script>
  window.onload = function () {
    // Create a URLSearchParams object from the current URL
    let params = (new URL(document.location)).searchParams;
    
    // If the 'email' parameter is present in the URL, set the value of the 'email' input field to the value of the parameter
    if (params.has('email')) { 
        email.value = params.get('email')
    }
    
    // If the 'reseterrors' parameter is present in the URL, parse the JSON data and loop through each error to display it and add a red color to the corresponding label
    if (params.has('reseterrors')) {
      var errors = JSON.parse(params.get('reseterrors'));
      let err_str = '';
      for (err in errors) {
        err_str += errors[err] + '\n';
        document.getElementById(`${err}_label`).innerHTML = `<font color="red">${errors[err]}</font>`;
      }
      
      // Display an alert with all the errors concatenated
      alert(err_str);
    }
}
</script>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <title>Update User Info</title>
  <style>
   /* Set the style for the entire body */
body {
text-align: center;
background: #e39c8a;
}

/* Set the style for the heading level 1 */
h1 {
text-align: center;
font-size: 36px;
margin-top: 80px;
margin-bottom: 20px;
}

/* Set the style for the heading level 2 */
h2 {
text-align: center;
font-size: 24px;
margin-top: 0;
margin-bottom: 20px;
text-transform: uppercase;
}

/* Set the style for the image */
img {
border-radius: 70%;
max-width: 300px;
margin-top: 20px;
transition: transform 0.3s ease-in-out;
}

/* Set the style for the image on hover */
img:hover {
transform: scale(1.05);
}

/* Set the style for the button */
.button {
height: 40px;
width: 150px;
font-size: 18px;
padding: 10px 20px;
background-color: #fff;
border: none;
color: #070100;
cursor: pointer;
transition: background-color 0.3s ease;
margin-bottom: 20px;
font-size: 16px;
border-radius:6px;
}

/* Set the style for the button on hover */
.button:hover {
background-color: #020000;
color: #fff;
}

/* Set the style for the unordered list */
ul {
list-style-type: none;
margin: 0;
padding: 0;
overflow: hidden;
background-color: rgba(0, 0, 0, 0.285);
}

/* Set the style for the list items */
li {
float: left;
}

/* Set the style for the anchor tags within the list */
li a {
display: block;
color: rgb(255, 255, 255);
text-align: center;
padding: 14px 16px;
text-decoration: none;
}

/* Set the style for the anchor tags within the list on hover */
li a:hover {
background-color: rgb(217, 206, 206);
}

/* Set the style for the form outline */
.form-outline {
position: relative;
margin-bottom: 20px;
}

/* Set the style for the form label */
.form-label {
position: center;
top: -10px;
left: 20px;
padding: 0 5px;
color: #040100;
font-size: 14px;
}

/* Set the style for the form control */
.form-control {
width: 50%;
padding: 10px;
border: none;
border-bottom: 1px solid #e39c8a;
margin-bottom: 20px;
font-size: 16px;
border-radius:6px;
}
     </style>
</head>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<body>
  <!-- section with custom gradient background -->
  <section class="vh-100 gradient-custom"> 
    <!-- container with vertical padding and full height -->
    <div class="container py-5 h-100"> 
      <!-- row with custom gradient background -->
      <div class="row d-flex align-items-center h-100 gradient-custom-3"> 
        <!-- column with varying widths depending on screen size -->
        <div class="col-12 col-md-8 col-lg-6 col-xl-5"> 
          <!-- card with dark background and white text -->
          <div class="card bg-dark text-white" style="border-radius: 1rem;"> 
            <!-- card body with padding and centered text -->
            <div class="card-body p-5 text-center"> 
          <!-- margin and padding classes for spacing -->
              <div class="mb-md-5 mt-md-4 pb-5"> 
                <script> 
                 document.write(`<form name="newpw" action="./newpw${location.search}" method="POST">`)
                </script>
                 <!-- header with bold text and uppercase -->
                  <h2 class="fw-bold mb-2 text-uppercase">Update your Password</h2>
      
                  <!-- form inputs with placeholder text, labels, and custom styles -->
                  <div class="form-outline form-white mb-4">
                    <input placeholder="Email" type="email" name="email" id="email" class="form-control form-control-lg" />
                    <label class="form-label" id="email_label" for="email"></label>
                  </div>
      
                  <div class="form-outline form-white mb-4">
                    <input placeholder="Password" type="password" name="password" id="password" class="form-control form-control-lg" />
                    <label class="form-label" id="password_label" for="password"></label>
                  </div>
      
                  <div class="form-outline form-white mb-4">
                    <input placeholder="New Password Here" type="password" name="newpassword" id="newpassword" class="form-control form-control-lg" />
                    <label class="form-label" id="newpassword_label" for="newpassword"></label>
                  </div>
      
                  <div class="form-outline form-white mb-4">
                    <input placeholder="Repeat New Password" type="password" name="repeatnewpassword" id="repeatnewpassword"
                      class="form-control form-control-lg" />
                    <label class="form-label" id="repeatnewpassword_label" for="repeatnewpassword"></label>
                  </div>
                  <div class="d-flex justify-content-center">
                    <button type="submit" class="button" id="change_password"
                      name="change_password" onclick="">Update</button> <!-- button to submit form data -->
                  </div>
                </div>
      
                <div>
                  <p class="mb-0">Don't have an account? <a href="registration.html" class="text-white-50 fw-bold">Sign Up</a>
                  </p> <!-- paragraph with link to registration page -->
                </div>
                </form> <!-- end of form -->
              </div>
            </div>
          </div>
        </div>
      </div>
  </section>

</body>

</html>